rule DefaultValues salience 10000000 {
    when 
        true
    then
    
        result.Put("male", "false");
    
        result.Put("female", "false");

        result.Put("young", "false");

        result.Put("old", "false");
    
        ctx.AddItem("south_brazil_0_entries", "PR");
    
        ctx.AddItem("south_brazil_0_entries", "SC");
    
        ctx.AddItem("south_brazil_0_entries", "RS");
    
        Retract("DefaultValues");
}

rule feat_male salience 1004 {
    when 
        true 
    then
        ctx.Put("male", processor.Boolean(ctx.GetString("sex") == "M"));
        
        result.Put("male", ctx.GetBool("male"));
        
        Retract("feat_male");
}

rule feat_female salience 1003 {
    when 
        true 
    then
        ctx.Put("female", processor.Boolean(!result.GetBool("male")));
        
        result.Put("female", ctx.GetBool("female"));
        
        Retract("feat_female");
}

rule feat_young salience 1004 {
    when 
        true 
    then
        ctx.Put("young", processor.Boolean(ctx.GetInt("age") >= 20 && ctx.GetInt("age") <= 45));
        
        result.Put("young", ctx.GetBool("young"));
        
        Retract("feat_young");
}

rule feat_old salience 1004 {
    when 
        true 
    then
        ctx.Put("old", processor.Boolean(ctx.GetInt("age") >= 46));
        
        result.Put("old", ctx.GetBool("old"));
        
        Retract("feat_old");
}

rule feat_southern_male_old salience 1001 {
    when 
        true 
    then
        ctx.Put("southern_male_old", processor.Boolean(result.GetBool("male") && result.GetBool("old") && result.GetBool("south_brazil")));
        
        result.Put("southern_male_old", ctx.GetBool("southern_male_old"));
        
        Retract("feat_southern_male_old");
}

rule feat_southern_male_young salience 1000 {
    when 
        true 
    then
        ctx.Put("southern_male_young", processor.Boolean(!result.GetBool("southern_male_old")));
        
        result.Put("southern_male_young", ctx.GetBool("southern_male_young"));
        
        Retract("feat_southern_male_young");
}

rule feat_southern_female_old salience 1001 {
    when 
        true 
    then
        ctx.Put("southern_female_old", processor.Boolean(result.GetBool("female") && result.GetBool("old") && result.GetBool("south_brazil")));
        
        result.Put("southern_female_old", ctx.GetBool("southern_female_old"));
        
        Retract("feat_southern_female_old");
}

rule feat_southern_female_young salience 1000 {
    when 
        true 
    then
        ctx.Put("southern_female_young", processor.Boolean(!result.GetBool("southern_female_old")));
        
        result.Put("southern_female_young", ctx.GetBool("southern_female_young"));
        
        Retract("feat_southern_female_young");
}

rule feat_south_brazil_0_value salience 1004 {
    when 
        true 
    then
        ctx.Put("south_brazil_0_value", "south_brazil" + "");
        
        Retract("feat_south_brazil_0_value");
}

rule feat_south_brazil_0 salience 1003 {
    when 
        true 
    then
        ctx.Put("south_brazil_0", processor.Boolean(processor.Contains(ctx.GetSlice("south_brazil_0_entries"), ctx.Get("south_brazil_0_value"))));
        
        result.Put("south_brazil_0", ctx.GetBool("south_brazil_0"));
        
        Retract("feat_south_brazil_0");
}

rule feat_south_brazil salience 1002 {
    when 
        true 
    then
        ctx.Put("south_brazil", processor.Boolean(result.GetBool("south_brazil_0")));
        
        result.Put("south_brazil", ctx.GetBool("south_brazil"));
        
        Retract("feat_south_brazil");
}
